import{p as A,v as _,s as b,c as l,$ as K,w as H,o as Q,b as X,g as D,q as Z,u as q,d as O,z as W,t as P,B as Y,G as j,M as m,N as $,h as J,j as ee,i as te,k as oe,m as ae,a0 as le,D as se,E as re,F as ne,H as ue,K as ie,L as ce,a as de,R as ve,a1 as me,S as x,U as y,Q as B,W as ge,X as p,_ as w,a2 as L,a3 as I,a4 as C,a5 as z,Z as F,a6 as U,Y as R,a7 as fe,V as he,a8 as pe,a9 as ye}from"./index-DCTA5BSV.js";import{m as Se,V as M}from"./VToolbar-BXT4KDu8.js";import{u as be}from"./ssrBoot-CmcddJss.js";import{V as ke}from"./VMain-CkDWmQbP.js";import{V as Ve}from"./VContainer-DCYKGdi1.js";import{V as xe}from"./VDivider-Bz54YqAU.js";const Be=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function we(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:h}=s;let g=0,u=0;const t=_(null),i=b(0),r=b(0),v=b(0),c=b(!1),d=b(!1),o=l(()=>Number(e.scrollThreshold)),k=l(()=>K((o.value-i.value)/o.value||0)),f=()=>{const n=t.value;if(!n||h&&!h.value)return;g=i.value,i.value="window"in n?n.pageYOffset:n.scrollTop;const S=n instanceof Window?document.documentElement.scrollHeight:n.scrollHeight;if(u!==S){u=S;return}d.value=i.value<g,v.value=Math.abs(i.value-o.value)};return H(d,()=>{r.value=r.value||i.value}),H(c,()=>{r.value=0}),Q(()=>{H(()=>e.scrollTarget,n=>{var T;const S=n?document.querySelector(n):window;S&&S!==t.value&&((T=t.value)==null||T.removeEventListener("scroll",f),t.value=S,t.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),X(()=>{var n;(n=t.value)==null||n.removeEventListener("scroll",f)}),h&&H(h,f,{immediate:!0}),{scrollThreshold:o,currentScroll:i,currentThreshold:v,isScrollActive:c,scrollRatio:k,isScrollingUp:d,savedScroll:r}}const Ie=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Se(),...j(),...Be(),height:{type:[Number,String],default:64}},"VAppBar"),Ce=D()({name:"VAppBar",props:Ie(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:h}=s;const g=_(),u=Z(e,"modelValue"),t=l(()=>{var V;const a=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),i=l(()=>{const a=t.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!u.value}),{currentScroll:r,scrollThreshold:v,isScrollingUp:c,scrollRatio:d}=we(e,{canScroll:i}),o=l(()=>t.value.hide||t.value.fullyHide),k=l(()=>e.collapse||t.value.collapse&&(t.value.inverted?d.value>0:d.value===0)),f=l(()=>e.flat||t.value.fullyHide&&!u.value||t.value.elevate&&(t.value.inverted?r.value>0:r.value===0)),n=l(()=>t.value.fadeImage?t.value.inverted?1-d.value:d.value:void 0),S=l(()=>{var E,N;if(t.value.hide&&t.value.inverted)return 0;const a=((E=g.value)==null?void 0:E.contentHeight)??0,V=((N=g.value)==null?void 0:N.extensionHeight)??0;return o.value?r.value<v.value||t.value.fullyHide?a+V:a:a+V});q(l(()=>!!e.scrollBehavior),()=>{O(()=>{o.value?t.value.inverted?u.value=r.value>v.value:u.value=c.value||r.value<v.value:u.value=!0})});const{ssrBootStyles:T}=be(),{layoutItemStyles:G}=W({id:e.name,order:l(()=>parseInt(e.order,10)),position:P(e,"location"),layoutSize:S,elementSize:b(void 0),active:u,absolute:P(e,"absolute")});return Y(()=>{const a=M.filterProps(e);return m(M,$({ref:g,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...G.value,"--v-toolbar-image-opacity":n.value,height:void 0,...T.value},e.style]},a,{collapse:k.value,flat:f.value}),h)}),{}}}),Te=A({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ce(),...ie(),...ue(),...j(),...ne(),...re({tag:"footer"}),...se()},"VFooter"),He=D()({name:"VFooter",props:Te(),setup(e,s){let{slots:h}=s;const g=_(),{themeClasses:u}=J(e),{backgroundColorClasses:t,backgroundColorStyles:i}=ee(P(e,"color")),{borderClasses:r}=te(e),{elevationClasses:v}=oe(e),{roundedClasses:c}=ae(e),d=b(32),{resizeRef:o}=le(f=>{f.length&&(d.value=f[0].target.clientHeight)}),k=l(()=>e.height==="auto"?d.value:parseInt(e.height,10));return q(()=>e.app,()=>{const f=W({id:e.name,order:l(()=>parseInt(e.order,10)),position:l(()=>"bottom"),layoutSize:k,elementSize:l(()=>e.height==="auto"?void 0:k.value),active:l(()=>e.app),absolute:P(e,"absolute")});O(()=>{g.value=f.layoutItemStyles.value})}),Y(()=>m(e.tag,{ref:o,class:["v-footer",u.value,t.value,r.value,v.value,c.value,e.class],style:[i.value,e.app?g.value:{height:de(e.height)},e.style]},h)),{}}}),Ee={__name:"default",setup(e){const s=ve(),{apiAuth:h}=ye(),g=me(),u=l(()=>[{to:"/login",text:"登入",icon:"mdi-login",show:!s.isLoggedIn},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!s.isLoggedIn},{to:"/admin",text:"管理",icon:"mdi-cog",show:s.isLoggedIn&&s.isAdmin}]),t=l(()=>[{to:"/foods",text:"熱量查詢",icon:"mdi-food-drumstick"},{to:"/record",text:"飲食紀錄",icon:"mdi-book-open-variant"},{to:"/profile",text:"個人資料",icon:"mdi-account"}]),i=async()=>{try{await h.delete("/user/logout")}catch(v){console.log(v)}s.logout(),g({text:"登出成功",snackbarProps:{color:"green"}})},r=_(["mdi-facebook","mdi-twitter","mdi-instagram"]);return(v,c)=>{const d=ge("router-view");return p(),x(B,null,[m(Ce,{style:{"background-color":"#495F41"}},{default:y(()=>[m(Ve,{class:"d-flex align-center"},{default:y(()=>[m(I,{to:"/"},{default:y(()=>c[0]||(c[0]=[C("食兼管理")])),_:1}),m(z),(p(!0),x(B,null,F(t.value,o=>(p(),w(I,{key:o.to,to:o.to,"prepend-icon":o.icon},{default:y(()=>[C(U(o.text),1)]),_:2},1032,["to","prepend-icon"]))),128)),m(z),(p(!0),x(B,null,F(u.value,o=>(p(),x(B,{key:o.to},[o.show?(p(),w(I,{key:0,to:o.to,"prepend-icon":o.icon},{default:y(()=>[C(U(o.text),1)]),_:2},1032,["to","prepend-icon"])):L("",!0)],64))),128)),R(s).isLoggedIn?(p(),w(fe,{key:0,style:{border:"1px solid black","margin-right":"10px"}},{default:y(()=>[m(he,{src:R(s).avatar},null,8,["src"])]),_:1})):L("",!0),R(s).isLoggedIn?(p(),w(I,{key:1,"prepend-icon":"mdi-logout",to:v.isLoggedIn?void 0:"/",onClick:i},{default:y(()=>c[1]||(c[1]=[C("登出")])),_:1},8,["to"])):L("",!0)]),_:1})]),_:1}),m(ke,{style:{"background-color":"#DCF0F5",color:"black"}},{default:y(()=>[m(d)]),_:1}),m(He,{color:"#495f41",class:"text-center d-flex flex-column",style:{"max-height":"90px"}},{default:y(()=>[pe("div",null,[(p(!0),x(B,null,F(r.value,o=>(p(),w(I,{key:o,icon:o,class:"mx-4",variant:"text"},null,8,["icon"]))),128))]),m(xe),c[2]||(c[2]=C(" 2025 © 泰山職業訓練場-學員陳筱媃 "))]),_:1})],64)}}};export{Ee as default};
