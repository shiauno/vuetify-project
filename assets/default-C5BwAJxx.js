import{p as A,v as _,s as k,c as s,$ as K,w as H,o as Q,b as X,g as D,q as Z,u as q,d as O,z as W,t as P,B as Y,G as j,M as d,N as $,h as J,j as ee,i as te,k as ae,m as oe,a0 as le,D as se,E as re,F as ne,H as ue,K as ie,L as ce,a as de,R as ve,a1 as me,S as x,U as S,Q as B,a2 as ge,W as fe,X as p,_ as w,a3 as L,a4 as C,a5 as I,a6 as z,Z as R,a7 as U,Y as F,a8 as he,V as pe,a9 as ye,aa as Se}from"./index-DHdcEP79.js";import{m as be,V as M}from"./VToolbar-9NWz1Zeu.js";import{u as ke}from"./ssrBoot-z32wLcZx.js";import{V as Ve}from"./VMain-DEJuql8z.js";import{V as xe}from"./VContainer-DY3vQIwL.js";import{V as Be}from"./VDivider-B6iXQcSP.js";const we=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ce(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:f}=r;let v=0,i=0;const t=_(null),c=k(0),n=k(0),h=k(0),y=k(!1),l=k(!1),m=s(()=>Number(e.scrollThreshold)),a=s(()=>K((m.value-c.value)/m.value||0)),g=()=>{const u=t.value;if(!u||f&&!f.value)return;v=c.value,c.value="window"in u?u.pageYOffset:u.scrollTop;const b=u instanceof Window?document.documentElement.scrollHeight:u.scrollHeight;if(i!==b){i=b;return}l.value=c.value<v,h.value=Math.abs(c.value-m.value)};return H(l,()=>{n.value=n.value||c.value}),H(y,()=>{n.value=0}),Q(()=>{H(()=>e.scrollTarget,u=>{var T;const b=u?document.querySelector(u):window;b&&b!==t.value&&((T=t.value)==null||T.removeEventListener("scroll",g),t.value=b,t.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),X(()=>{var u;(u=t.value)==null||u.removeEventListener("scroll",g)}),f&&H(f,g,{immediate:!0}),{scrollThreshold:m,currentScroll:c,currentThreshold:h,isScrollActive:y,scrollRatio:a,isScrollingUp:l,savedScroll:n}}const Ie=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...be(),...j(),...we(),height:{type:[Number,String],default:64}},"VAppBar"),Te=D()({name:"VAppBar",props:Ie(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:f}=r;const v=_(),i=Z(e,"modelValue"),t=s(()=>{var V;const o=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:o.has("hide"),fullyHide:o.has("fully-hide"),inverted:o.has("inverted"),collapse:o.has("collapse"),elevate:o.has("elevate"),fadeImage:o.has("fade-image")}}),c=s(()=>{const o=t.value;return o.hide||o.fullyHide||o.inverted||o.collapse||o.elevate||o.fadeImage||!i.value}),{currentScroll:n,scrollThreshold:h,isScrollingUp:y,scrollRatio:l}=Ce(e,{canScroll:c}),m=s(()=>t.value.hide||t.value.fullyHide),a=s(()=>e.collapse||t.value.collapse&&(t.value.inverted?l.value>0:l.value===0)),g=s(()=>e.flat||t.value.fullyHide&&!i.value||t.value.elevate&&(t.value.inverted?n.value>0:n.value===0)),u=s(()=>t.value.fadeImage?t.value.inverted?1-l.value:l.value:void 0),b=s(()=>{var E,N;if(t.value.hide&&t.value.inverted)return 0;const o=((E=v.value)==null?void 0:E.contentHeight)??0,V=((N=v.value)==null?void 0:N.extensionHeight)??0;return m.value?n.value<h.value||t.value.fullyHide?o+V:o:o+V});q(s(()=>!!e.scrollBehavior),()=>{O(()=>{m.value?t.value.inverted?i.value=n.value>h.value:i.value=y.value||n.value<h.value:i.value=!0})});const{ssrBootStyles:T}=ke(),{layoutItemStyles:G}=W({id:e.name,order:s(()=>parseInt(e.order,10)),position:P(e,"location"),layoutSize:b,elementSize:k(void 0),active:i,absolute:P(e,"absolute")});return Y(()=>{const o=M.filterProps(e);return d(M,$({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...G.value,"--v-toolbar-image-opacity":u.value,height:void 0,...T.value},e.style]},o,{collapse:a.value,flat:g.value}),f)}),{}}}),He=A({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ce(),...ie(),...ue(),...j(),...ne(),...re({tag:"footer"}),...se()},"VFooter"),Pe=D()({name:"VFooter",props:He(),setup(e,r){let{slots:f}=r;const v=_(),{themeClasses:i}=J(e),{backgroundColorClasses:t,backgroundColorStyles:c}=ee(P(e,"color")),{borderClasses:n}=te(e),{elevationClasses:h}=ae(e),{roundedClasses:y}=oe(e),l=k(32),{resizeRef:m}=le(g=>{g.length&&(l.value=g[0].target.clientHeight)}),a=s(()=>e.height==="auto"?l.value:parseInt(e.height,10));return q(()=>e.app,()=>{const g=W({id:e.name,order:s(()=>parseInt(e.order,10)),position:s(()=>"bottom"),layoutSize:a,elementSize:s(()=>e.height==="auto"?void 0:a.value),active:s(()=>e.app),absolute:P(e,"absolute")});O(()=>{v.value=g.layoutItemStyles.value})}),Y(()=>d(e.tag,{ref:m,class:["v-footer",i.value,t.value,n.value,h.value,y.value,e.class],style:[c.value,e.app?v.value:{height:de(e.height)},e.style]},f)),{}}}),Ne={__name:"default",setup(e){const r=ve(),{apiAuth:f}=Se(),v=ge(),i=me(),t=s(()=>[{to:"/login",text:"登入",icon:"mdi-login",show:!r.isLoggedIn},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!r.isLoggedIn},{to:"/admin",text:"管理",icon:"mdi-cog",show:r.isLoggedIn&&r.isAdmin}]),c=s(()=>[{to:"/foods",text:"熱量查詢",icon:"mdi-food-drumstick"},{to:"/record",text:"飲食紀錄",icon:"mdi-book-open-variant"},{to:"/profile",text:"個人資料",icon:"mdi-account"}]),n=async()=>{try{await f.delete("/user/logout")}catch(y){console.log(y)}r.logout(),i({text:"登出成功",snackbarProps:{color:"green"}}),v.push("/")},h=_(["mdi-facebook","mdi-twitter","mdi-instagram"]);return(y,l)=>{const m=fe("router-view");return p(),x(B,null,[d(Te,{style:{"background-color":"#495F41"}},{default:S(()=>[d(xe,{class:"d-flex align-center"},{default:S(()=>[d(C,{to:"/"},{default:S(()=>l[0]||(l[0]=[I("食兼管理")])),_:1}),d(z),(p(!0),x(B,null,R(c.value,a=>(p(),w(C,{key:a.to,to:a.to,"prepend-icon":a.icon},{default:S(()=>[I(U(a.text),1)]),_:2},1032,["to","prepend-icon"]))),128)),d(z),(p(!0),x(B,null,R(t.value,a=>(p(),x(B,{key:a.to},[a.show?(p(),w(C,{key:0,to:a.to,"prepend-icon":a.icon},{default:S(()=>[I(U(a.text),1)]),_:2},1032,["to","prepend-icon"])):L("",!0)],64))),128)),F(r).isLoggedIn?(p(),w(he,{key:0,style:{border:"1px solid black","margin-right":"10px"}},{default:S(()=>[d(pe,{src:F(r).avatar},null,8,["src"])]),_:1})):L("",!0),F(r).isLoggedIn?(p(),w(C,{key:1,"prepend-icon":"mdi-logout",onClick:n},{default:S(()=>l[1]||(l[1]=[I("登出")])),_:1})):L("",!0)]),_:1})]),_:1}),d(Ve,{style:{"background-color":"#DCF0F5",color:"black"}},{default:S(()=>[d(m)]),_:1}),d(Pe,{color:"#495f41",class:"text-center d-flex flex-column",style:{"max-height":"90px"}},{default:S(()=>[ye("div",null,[(p(!0),x(B,null,R(h.value,a=>(p(),w(C,{key:a,icon:a,class:"mx-4",variant:"text"},null,8,["icon"]))),128))]),d(Be),l[2]||(l[2]=I(" 2025 © 泰山職業訓練場-學員陳筱媃 "))]),_:1})],64)}}};export{Ne as default};
